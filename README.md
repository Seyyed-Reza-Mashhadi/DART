# Data Analysis & Representation Toolkit (DART) for Borehole NMR Data
 <img width="1400" height="600" alt="VB-V03" src="https://github.com/user-attachments/assets/630ed34b-e852-469b-9de0-11e70bc858e0" />

## üîç Overview
DART is a powerful Python toolkit designed for processing, statistical analysis, visualization, and interpretation of Borehole Nuclear Magnetic Resonance (BNMR) data from Vista Clara NMR logging systems. It takes processed/inverted NMR data product text files, and performs geospatial analysis, statistical modeling, and geological illustrations using a unified workflow for comprehensive subsurface characterization.

## üåü Features
### üõ†Ô∏è Core Functionality
- üìà **Statistical Modeling:** Statistical distribution analysis, model calibration for improved hydraulic conductivity (K) estimation
- üó∫Ô∏è **Geospatial Analysis:** Coordinate handling, profile azimuth calculation, generating shape files, creating PNG-embedded KML exports
- ü™® **Geological Integration:** linking geology logs to NMR data (Geo-labeling), geological section plots

### üìä Advanced Visualization Engine
- Professional borehole log plots with comprehensive illustration of spin-echo decay, porosity, water partitioning, relaxation time distribution, hydraulic conductivity, etc. 
- Interactive section plotting with topography-aware scaling, capable of handling both numerical and categorical data variables
- Statistical graphics (histograms, KDEs, box plots, pair plots, etc.)
- Ternary diagrams, particularly for water partitioning data analysis

### üì¶ Architecture
#### Data Class
- **Purpose:** Manages borehole-specific data operations by loading Vista Clara exports to process borehole data.
- **Input:** Accepts borehole names to load and manage related data.
- **Description:** Add all export files (named after boreholes) in a single folder and use it as input directory for all functions within this class. Note that borehole names can be extracted by a dedicated function out of this class.
- **Key Functions:**

| Function                   | Description                                             |
|----------------------------|---------------------------------------------------------|
| `import_data()`            | Loads Vista Clara processed files for a borehole        |
| `logplot()`                | Generates professional multi-panel borehole log plot    |
| `create_BNMR_dataframe()`  | Builds core dataset without geology labels              |
| `geo_label()`              | Adds geological labels to BNMR measurements             |
| `geo_label_T2D()`          | Creates T‚ÇÇ distribution dataset with geology labels     |
| `geo_label_SpinEchoDecay()`| Creates spin echo decay dataset with geology labels     |
| `export_kml()`             | Generates KML file with embedded PNG image of borehole logplots so that the borehole logs can be seen by hovering or selecting the borehole on Google Earth

<br><br>
*Play the gif image to see a demonstration of the generated KML file in Google Earth*

![KML file in Google Earth](https://github.com/user-attachments/assets/ae2f685c-63fe-41ed-8e35-c412c3095330)


#### Statistics Class
- **Purpose:** Manages dataset-based statistical visualization and modeling
- **Input:** Accepts a pandas DataFrame (e.g., a geo-labeled BNMR dataset generated by the Data Class fucntions) as input
- **Description:** Designed to prepare a range of illustrations useful for analyzing BNMR datasets
- **Key functions:**

| Function                              | Description                                          |
|---------------------------------------|------------------------------------------------------|
| `qc_dataset()`                        | Data quality assessment with noise statistics        |
| `statistical_report()`                | Generates Excel report with key metrics              |
| `boxplot_WC()`                        | Water partitioning box plots by geology              |
| `water_fractions_pairplot()`          | Scatter plots of porosity fractions                  |
| `ternary_plot()`                      | Ternary plot for porosity fractions                  |
| `calibrate_K_estimation_models()`     | Curve fitting for improved K estimation from NMR data using Schlumberger-DOll Research (SDR), Timur-Coates (TC), and Sum of Echoes (SOE) models                 |
| `k_calculation_in_BNMR_dataframe()`   | Using calculated coefficients from the function above and calculate K values in the BNMR dataset

#### Other Functions / Tools
- **Purpose:** Standalone tools for specialized operations
- **Input:** Varies by function
- **Key functions:**
  
| Function                           | Description                                           |
|------------------------------------|-------------------------------------------------------|
| `add_coordinates()`                | Adds XYZ coordinates to BNMR dataframe                |
| `get_borehole_names()`             | Extracting borehole names from the Vista Clara export files directory       |
| `create_avg_BNMR_shape_files()`    | Exports averages of BNMR parameters as shapefiles for spatial data analysis                                                                        |
| `get_azimuth()`                    | Calculates profile orientation from coordinates       |
| `remove_duplicates()`              | Cleans duplicate measurements in BNMR dataframe       |
| `section_plot()`                   | Creates cross-sections of numerical or categorical variables (e.g., BNMR or geology data). Can be used interactively or with predefined coordinates. Note that there are other section plotting functions built upon this function for especific purposes                                                                           |

## üéì Funding
DART is a tool developed as part of my PhD research in Geophysics at the Hydrogeophysics Group (HGG), Department of Geoscience, Aarhus University. My PhD was supported by funding from the Independent Research Fund Denmark (grant number: 0171-00056B).

## üìù Related Publications
For application cases, refer to my NMR-related publications on [Google Scholar](https://scholar.google.com/citations?hl=en&user=42SLfsYAAAAJ&view_op=list_works&sortby=pubdate).

